"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.fetchPhoto = void 0;
const node_fetch_1 = __importDefault(require("node-fetch"));
// import { EdHeaders } from "./util";
const EdHeadersPhoto = {
    Referer: "https://www.ecoledirecte.com/",
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36",
};
async function fetchPhoto(account) {
    if (!account.profile.photo)
        return;
    const res = await node_fetch_1.default("https:" + account.profile.photo, {
        method: "GET",
        headers: EdHeadersPhoto,
        redirect: "follow",
    }).catch(() => undefined);
    if (!res)
        return;
    const buf = await res.buffer();
    const str = "data:" +
        res.headers.get("Content-Type") +
        ";base64," +
        buf.toString("base64");
    return [buf, str];
}
exports.fetchPhoto = fetchPhoto;

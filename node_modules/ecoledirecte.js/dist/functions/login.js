"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getMainAccount = exports.login = void 0;
const v3_1 = require("ecoledirecte-api-types/v3");
const util_1 = require("./util");
/**
 * @returns EcoleDirecte `/v3/login.awp` response
 */
async function login(username, password, context = {}) {
    const body = await util_1.makeRequest({
        method: "POST",
        url: new URL(v3_1.Routes.login(), v3_1.root).href,
        body: {
            identifiant: username,
            motdepasse: password,
            acceptationCharte: true,
        },
    }, { action: "login", username, password, ...context });
    return body;
}
exports.login = login;
/**
 * @returns The main account of the array
 */
function getMainAccount(accounts) {
    const mainAccount = accounts.find(acc => acc.main) || accounts[0] || null;
    return mainAccount;
}
exports.getMainAccount = getMainAccount;
